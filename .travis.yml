---
language: jvm
dist: xenial
jdk:
  - openjdk11

stages:
  #- build
  #- test
  #- name: publish
  #  if: branch = main
  - deploy
    if: branch = main

jobs:
  include:
    #- stage: build
    #  script: ./gradlew jar --scan
#    - stage: test
#      script:
#        - ./gradlew test
#        - bash <(curl -s https://codecov.io/bash)
    #- stage: publish
    #  script: ./gradlew publish
    - stage: deploy
      script: ./gradlew build
      deploy:
        provider: releases
        api_key:
          secure: "vhuHTz+A5RzIiO8OI3zD9Dn8yx/JL83POrJbmNvM68RUsYXi8cqXf1vvQ6mFqW8ezU+LJt1+un6i7yoi8m9bKYlYfkBVSfZ0bJmu+f9WLD8ImuSuoCROgwXCQfxXSkbNRYRTCsgmaUHetAmcYrxDudeo0bmE2a6YsxmG5p9BYrX5xatZu6gjKTCUe1BXxR/32lnxbF18LzOz2mZDooaNX2WO/kMo+uh36bm756ulC9SN18ME4acZ+X62cWMifRCq1hqBk/PFFavEWF/PoS9EiZ9UAuSf0nKkgGAQ3FAuKDlq+8ambk/ifNlwsJx54RIUwWUIXlo5ujaPQY103Q6Bw+PcwRV2l6ePm8mGuCyYcFLjunWODxX+5RhD28FpPE57KpaMMa8tNBN9Y95I+bfpz6JY1PjC7tZOmoQ4Ln234Ok/t9Hd+STsLussmBcBsHHtNcY5vY4QOSwuws0A77mLIqP2xOMKQHgMn02H96J1qqBlFboZ0iyUFwDgdYLYLBwnkhwNXOjOwa3+WHLyB2SA3FopywsZq7MlBleZhH3zlswvnj3EeNoTZtxr0TrMrHITDCSvnTcBytKVCN6+cQncoq3CbZ7WGQ16GA8ImSBcL24w7WAizEHIf2lHF88Xbpx9zWHKBNdIkrwKTQnWk1j1hnqH5Om4LRAEFtgFYZyoc5o="
        file_glob: true
        file: ./build/distributions/*.*
        skip_cleanup: true
        on:
          all_branches: true
          tags: false